<!--
This is the page that is presented in the 'Search' tab.
Feel free to customize layouts and components to change how the tab view looks.
-->
<Page
        class="page"
        loaded="onLoaded"
        navigatingTo="onNavigatingTo"
        xmlns="http://schemas.nativescript.org/tns.xsd"
        xmlns:nsListView="nativescript-ui-listview"
        xmlns:nsFloatingButton="nativescript-floatingactionbutton">

    <ActionBar class="action-bar">
        <NavigationButton text="Go Back" android.systemIcon="ic_menu_back" tap="onBack"/>
        <Label class="action-bar-title" text="Posts"></Label>
        <ActionItem tap="updateMessages"
                    ios.systemIcon="13" ios.position="right"
                    icon="res://ic_reload_white" android.position="actionBar"/>
        <!--android:icon="res://ic_reload_white" android.position="actionBar"/>-->
        <ActionItem tap="addMessage"
                    ios.systemIcon="4" ios.position="right"
                    icon="res://ic_add_white" android.position="actionBar"/>
    </ActionBar>

    <GridLayout rows="*, auto" row="1" tap="cancelNetwork">
        <GridLayout rows="*,auto" columns="*" rowSpan="2">
            <GridLayout class="page-content" row="0" col="0" rows="*" columns="*,*,auto">
                <Label text="Add a badge before sending messages."
                       textWrap="true"
                       class="empty-list-label"
                       colSpan="3"
                       margin="5%"
                       visibility="{{ isEmpty ? 'visible' : 'collapsed' }}"
                />

                <nsListView:RadListView items="{{ messageList }}" itemTap="messageTapped" row="0" colSpan="3"
                                        id="listView">

                    <nsListView:RadListView.itemTemplate>
                        <GridLayout rows="*,*" columns="*, auto" backgroundColor="white"
                                    class="basic-list-decorated">
                            <Label class="list-title" text="{{ subject }}" row="0" col="0"
                                   textWrap="true"/>
                            <Label text="{{ balance }}" row="0" col="1" textWrap="true"/>
                            <Label text="{{ reward }}" row="1" col="1" textWrap="true"/>
                        </GridLayout>
                    </nsListView:RadListView.itemTemplate>
                </nsListView:RadListView>

            </GridLayout>
        </GridLayout>
        <StackLayout row="0" backgroundColor="gray"
                     style="{{ networkStatus ? 'opacity:0.5;' : 'opacity:0;' }}"/>
        <GridLayout rows="auto"
                    row="1"
                    visibility="{{ networkStatus ? 'visible' : 'collapse'}}">
            <Label row="0" width="100%" backgroundColor="white"/>
            <Label row="0" text="{{ networkStatus }}" class="label-title"
                   id="progress_text"/>
            <Label row="0" width="100%" backgroundColor="blue" style="horizontal-align:left; opacity:0.5;"
                   id="progress_bar"/>
        </GridLayout>
    </GridLayout>
</Page>